<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
    //正则练习
    //1找到小写字母，在后边加上（索引）
    let str="XaZZcUdFe";
    let reg=/[a-z]/g;
    str=str.replace(reg,function($0,index){
        return `${$0}(${index})`;
    })
    console.log(str);
    //2找到连续的两个数字，用他们的和替换
    /*str="456a89b72cs";
    reg=/((\d)(\d))/g;
     str=str.replace(reg,($0,$1,$2,$3)=>{
        console.log(typeof $2);//$n就是第n个()
        return Number($2)+Number($3);//如果不Number()直接字符串拼接了，匹配内容是string
    }) 
    //str=str.replace(reg,'$2+$3');//直接字符串拼接
    
    console.log(str);*/
    //将字符串中的占位符换成数组下标对应的内容
    /* str="My name is {0}.I am {1} years old. I am in class {2} grade {3}";
    a=['zf',38,4,6];
    reg=/{(\d)}/g;
    
    str=str.replace(reg,(...[,d])=>{
        return a[d];
    });
    console.log(str); */
    //给数字加上千分符
   /*  str="12345678912";
    reg=/(\d{1,3})((\d{3})+)$/g;
    let newstr=str.replace(reg,function($0,$1,$2){
        console.log($1);
        console.log($2);
        return $1+","+$2.replace(/\d{3}(?!$)/g,function(){
            console.log(arguments[0]);
            return arguments[0]+",";
        });
    });
    console.log(str); */

    /* str="12345678912";
    reg=/\d(?!$)/g;//正则只是数数
    newstr=str.replace(reg,function(){
        console.log(arguments[0],arguments[1],arguments[2],arguments[2].length-arguments[1]-1);
        if((arguments[2].length-arguments[1]-1)%3==0){
            return arguments[0]+",";
        }else{
            return arguments[0];
        }
    }) 

    console.log(newstr);*/
    //反转处理再反转
    /* str="12345678912";
    str=str.split("").reverse().join("");
    reg=/(\d{3})/g;
    str=str.replace(reg,(...[,$1])=>{
        return $1+",";
    });
    str=str.split("").reverse().join("");
    console.log(str); */
    
    //str.search(reg)//返回第一次匹配位置
    //str.split(reg);

    //var str1="2012-04-06 12:30:30"; 将年月日时分秒取出存到数组里

    /* var str1="2012-04-06 12:30:30";
    var arr=str1.match(/\d+/g); */

    //写出同时包含abc不考虑顺序的正则
    str="bacd";
    //reg=/([a-c])([\1])/;//reg.test("a\1")==true []中\1就是\1

    let ary=str.match(reg);
    console.log(ary);

    //For example, /<.*?>/ matches "<foo>" in "<foo> <bar>", whereas /<.*>/ matches "<foo> <bar>".
    /* str='<foo><bar>';
    console.log(str.match(/<.*?>/));
    console.log(str.match(/<.*>/)); */

    //表达式 "(/w)((?=/1/1/1)(/1))+" 在匹配字符串 "aaa ffffff999999999" 时，将可以匹配 6 个"f"的前 4 个，
    //可以匹配 9 个"9"的前7 个。这个表达式可以读解成：重复 4 次以上的字母数字，则匹配其剩下最后 2 位之前的部分。
    //当然，这个表达式可以不这样写，在此的目的是作为演示之用。格式："(?!xxxxx)"，所在缝隙的右侧，必须不能匹配 xxxxx 这部分表达式
    
    /* str="aaa ffffff999999999";
    reg=/(\w)((?=\1\1\1)(\1))+/;//？剩下两位原因：\w匹配时后边必须有三个，之后跟着\1，所以是剩两个
    //x(?=y) Matches x only if x is followed by y.
    console.log(str.match(reg)); */

/*     举例 3：

表达式 "((?!/bstop/b).)+" 在匹配 "fdjka ljfdl stop fjdsla fdj"时，将从头一直匹配到  "stop"  之前的位置，
如果字符串中没有"stop"，则匹配整个字符串。
*/
/* str='fdjka ljfdl stop fjdsla fdj';
reg=/((?!\bstop\b).)+/;//给正则加上'/(.(?=\bstop\b))+/'就完了
//x(?!y) Matches x only if x is not followed by y.
let reg1=/(.(?!\bstop\b))+/;
console.log(str.match(reg));//"fdjka ljfdl "
console.log(str.match(reg1));//"fdjka ljfdl"

//如果(?!y)前啥也不写 /(?!\d)/.exec("1")=="" */

/*

举例 4：

表达式 "do(?!/w)" 在匹配字符串 "done, do, dog" 时，只能匹配 "do"。在本条举例中，
"do" 后边使用 "(?!/w)" 和使用 "/b" 效果是一样的。

 */


    </script>
</body>
</html>