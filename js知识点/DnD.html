<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
    #clock{
        font: bold 24pt sans;
        background: #ddf;
        padding: 10px;
    }
    </style>
</head>
<body>
    <h1>从时钟中拖出时间戳</h1>
    <span id='clock'></span>
    <textarea cols="60" rows="10"></textarea>
    <pre>
        拖放源
        DnDHandler(ev)//ev.dataTransfer=DataTransfer(定义DnD API方法和属性)
        有HTML draggable属性的文档元素都是拖放源，
        当用户开始拖动时,触发dragstart事件
        setData()指定当前可用的拖放源数据（dataTransfer.items.add()）
        dataTransfer.effectAllowed指定支持移动/复制/链接
        dataTransfer.setDragImage()
        dataTransfer.addElement()指定图片或文档元素用做拖动时的视觉表现
        拖动过程中，触发拖动事件
        放置数据时触发dragend事件

        拖放目标
        拖放对象进入文档元素，<b>dragenter</b>
        dataTransfer.types是拖放对象的可用数据
        dataTransfer.effectAllowed确保拖放源和拖放目标同意使用移动/复制/链接

        <b>dragover</b>
        如果拖放目标想指定只允许移动、复制或链接，应该使用dragover设置
        dataTransfer.dropEffect
        <b>dragleave</b>
        <b>drop</b>放置到拖动目标上 dataTrasfer.getData()
        dataTransfer.files//类数组的File对象

    </pre>
    <script>
        (function(){
            var clock=document.getElementById('clock');
            var icon=new Image();
            icon.src="../img/1.png";
            function displayTime(){
                var now=new Date();
                var hrs=now.getHours(),mins=now.getMinutes();
                if(mins<10) mins="0"+mins;
                clock.innerHTML=hrs+":"+mins;
                setTimeout(displayTime,60000)
            }
            displayTime();
            clock.draggable=true;
            clock.ondragstart=function(event){
                var event=event || window.event;
                var dt=event.dataTransfer;
                console.dir(dt);
                dt.setData("Text",Date()+"\n")
                if(dt.setDragImage) dt.setDragImage(icon,0,0);
            }
        })()
    </script>
</body>
</html>